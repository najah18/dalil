function google_map_submit_initialize(){"use strict";if(0!==jQuery("#googleMapsubmit").length){var e=jQuery("#property_latitude").val(),t=jQuery("#property_longitude").val();if(jQuery("#agency_lat").length>0&&(e=jQuery("#agency_lat").val(),t=jQuery("#agency_long").val()),jQuery("#developer_lat").length>0&&(e=jQuery("#developer_lat").val(),t=jQuery("#developer_long").val()),""!==e&&void 0!==e||(e=google_map_submit_vars.general_latitude),""!==t&&void 0!==t||(t=google_map_submit_vars.general_longitude),1==parseInt(mapfunctions_vars.geolocation_type)){geocoder=new google.maps.Geocoder;var a={flat:!1,noClear:!1,zoom:17,scrollwheel:!1,draggable:!0,disableDefaultUI:!1,center:new google.maps.LatLng(e,t),mapTypeId:google.maps.MapTypeId.ROADMAP,gestureHandling:"cooperative"};if(!document.getElementById("googleMapsubmit"))return;map=new google.maps.Map(document.getElementById("googleMapsubmit"),a),google.maps.visualRefresh=!0;var o=new google.maps.LatLng(e,t);if(wpestate_placeSavedMarker(o),""!==mapfunctions_vars.map_style){var r=JSON.parse(mapfunctions_vars.map_style);map.setOptions({styles:r})}google.maps.event.addListener(map,"click",function(e){wpestate_placeMarker(e.latLng)})}else{var n=L.latLng(e,t);map=L.map("googleMapsubmit",{center:n,zoom:15});var l=wpresidence_open_stret_tile_details();map.addLayer(l),map.on("click",function(e){map.removeLayer(propertyMarker_submit);L.latLng(e.latlng);propertyMarker_submit=L.marker(e.latlng).addTo(map),propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+e.latlng.lat+" Longitude: "+e.latlng.lng+"</div>").openPopup(),jQuery("#property_latitude").val(e.latlng.lat),jQuery("#property_longitude").val(e.latlng.lng),jQuery("#agency_lat").val(e.latlng.lat),jQuery("#agency_long").val(e.latlng.lng),jQuery("#developer_lat").val(e.latlng.lat),jQuery("#developer_long").val(e.latlng.lng)});var s=L.latLng(n);propertyMarker_submit=L.marker(s).addTo(map),propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+e+" Longitude: "+t+"</div>")}}}function wpestate_placeSavedMarker(e){"use strict";wpestate_removeMarkers();var t=new google.maps.Marker({position:e,map:map});gmarkers.push(t);var a=new google.maps.InfoWindow({content:"Latitude: "+e.lat()+"<br>Longitude: "+e.lng()});a.open(map,t)}function wpestate_codeAddress(){"use strict";var e,t,a=document.getElementById("property_address").value,o=jQuery("#property_city_submit").val(),r=a;"none"!==o&&(r=r+","+o);var n=document.getElementById("property_county").value;n&&(r=r+","+n);var l=document.getElementById("property_country").value;if(l&&(r=r+","+l),1==parseInt(mapfunctions_vars.geolocation_type))geocoder.geocode({address:r},function(a,o){o==google.maps.GeocoderStatus.OK?(e=a[0].geometry.location.lat(),t=a[0].geometry.location.lng(),wpresidence_submit_set_postion(e,t)):alert(google_map_submit_vars.geo_fails+o)});else if(2==parseInt(mapfunctions_vars.geolocation_type))jQuery.get("https://nominatim.openstreetmap.org/search",{format:"json",addressdetails:"1",q:r}).done(function(a){""==a?alert(google_map_submit_vars.geo_fails+status):(e=a[0].lat,t=a[0].lon,wpresidence_submit_set_postion(e,t))}).fail(function(e){}).always(function(){})}function wpresidence_submit_set_postion(e,t){if(wpestate_removeMarkers(),1==parseInt(mapfunctions_vars.geolocation_type)){var a=new google.maps.LatLng(e,t);map.setCenter(a);var o=new google.maps.Marker({map:map,position:a});gmarkers.push(o);var r=new google.maps.InfoWindow({content:"Latitude: "+e+"<br>Longitude: "+t});r.open(map,o),document.getElementById("property_latitude").value=e,document.getElementById("property_longitude").value=t}else{var n=L.latLng(e,t),l=L.latLng(n);map.removeLayer(propertyMarker_submit),propertyMarker_submit=L.marker(l).addTo(map),propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+e+" Longitude: "+t+"</div>"),setTimeout(function(){propertyMarker_submit.openPopup()},600),propertyMarker_submit.fire("click"),document.getElementById("property_latitude").value=e,document.getElementById("property_longitude").value=t,map.panTo(new L.LatLng(e,t))}}function wpestate_codeAddress_agency(e,t,a,o,r){"use strict";var n=jQuery(e).val(),l=jQuery(t).val(),s=n+","+l,p=jQuery(a).val(),i="";if(p&&(s=s+","+p),i=n+","+l,1==wp_estate_kind_of_map)geocoder.geocode({address:s},function(e,t){if(t==google.maps.GeocoderStatus.OK){map.setCenter(e[0].geometry.location);var a=new google.maps.Marker({map:map,position:e[0].geometry.location});gmarkers.push(a);var n=new google.maps.InfoWindow({content:"Latitude: "+e[0].geometry.location.lat()+"<br>Longitude: "+e[0].geometry.location.lng()});n.open(map,a),jQuery(o).val(e[0].geometry.location.lat()),jQuery(r).val(e[0].geometry.location.lng())}else alert(google_map_submit_vars.geo_fails+t)});else if(2==wp_estate_kind_of_map)jQuery.get("https://nominatim.openstreetmap.org/search",{format:"json",addressdetails:"1",q:i}).done(function(e){if(void 0!==e[0]){var t=e[0].lat,a=e[0].lon,n=L.latLng(t,a),l=L.latLng(n);map.removeLayer(propertyMarker_submit),propertyMarker_submit=L.marker(l).addTo(map),propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+t+" Longitude: "+a+"</div>"),setTimeout(function(){propertyMarker_submit.openPopup()},600),map.panTo(new L.LatLng(t,a)),jQuery(o).val(e[0].lat),jQuery(r).val(e[0].lon)}else alert(google_map_submit_vars.geo_fails+status)}).fail(function(){}).always(function(){})}function wpestate_placeMarker(e){"use strict";wpestate_removeMarkers();var t=new google.maps.Marker({position:e,map:map});gmarkers.push(t);var a,o=new google.maps.InfoWindow({content:"Latitude: "+e.lat()+"<br>Longitude: "+e.lng()});o.open(map,t),a=document.getElementById("property_latitude"),null!==a&&(document.getElementById("property_latitude").value=e.lat(),document.getElementById("property_longitude").value=e.lng()),a=document.getElementById("agency_lat"),null!==a&&(document.getElementById("agency_lat").value=e.lat(),document.getElementById("agency_long").value=e.lng()),a=document.getElementById("developer_lat"),null!==a&&(document.getElementById("developer_lat").value=e.lat(),document.getElementById("developer_long").value=e.lng())}function wpestate_removeMarkers(){"use strict";for(var e=0;e<gmarkers.length;e++)1==parseInt(mapfunctions_vars.geolocation_type)?gmarkers[e].setMap(null):map.removeLayer(gmarkers[e])}var geocoder,map,selected_id="",gmarkers=[],propertyMarker_submit="";jQuery("#open_google_submit").on("click",function(){"use strict";setTimeout(function(){initialize(),google.maps.event.trigger(map,"resize")},300)}),jQuery("#google_capture").on("click",function(e){"use strict";e.preventDefault(),wpestate_removeMarkers(),wpestate_codeAddress()}),"object"==typeof google&&"object"==typeof google.maps?google.maps.event.addDomListener(window,"load",google_map_submit_initialize):google_map_submit_initialize(),jQuery("#google_agency_location").on("click",function(e){"use strict";e.preventDefault(),wpestate_removeMarkers(),wpestate_codeAddress_agency("#agency_address","#agency_city","#agency_county","#agency_lat","#agency_long")}),jQuery("#google_developer_location").on("click",function(e){"use strict";e.preventDefault(),wpestate_removeMarkers(),wpestate_codeAddress_agency("#developer_address","#developer_city","#developer_county","#developer_lat","#developer_long")}),jQuery(document).ready(function(e){"use strict";function t(t){e("#property_area").val(""),e("#property_zip").val(""),e("#property_county").val(""),e("#property_city_submit").val("");for(var a=0;a<t.address_components.length;a++){var o=t.address_components[a].types[0],r=t.address_components[a][n[o]];"street_number"===o||"route"===o||("neighborhood"===o?e("#property_area").val(r):"postal_code_prefix"===o?e("#property_zip").val(r):"postal_code"===o?e("#property_zip").val(r):"administrative_area_level_2"===o?e("#property_county").val(r):"administrative_area_level_1"===o?e("#property_county").val(r):"locality"===o?e("#property_city_submit").val(r):"country"===o&&e("#property_country").val(r))}wpestate_codeAddress()}function a(){var e=document.getElementById("property_address").value,t=jQuery("#property_city_submit").val(),a=e+","+t;if(document.getElementById("property_state")){var o=document.getElementById("property_state").value;o&&(a=a+","+o)}if(document.getElementById("property_country")){var r=document.getElementById("property_country").value;r&&(a=a+","+r)}geocoder.geocode({address:a},function(e,t){if(t==google.maps.GeocoderStatus.OK){map.setCenter(e[0].geometry.location);var a=new google.maps.Marker({map:map,position:e[0].geometry.location}),o=new google.maps.InfoWindow({content:"Latitude: "+e[0].geometry.location.lat()+"<br>Longitude: "+e[0].geometry.location.lng()});o.open(map,a),document.getElementById("property_latitude").value=e[0].geometry.location.lat(),document.getElementById("property_longitude").value=e[0].geometry.location.lng()}else alert(google_map_submit_vars.geo_fails+t)})}var o,r;e("#imagelist").sortable({revert:!0,update:function(t,a){var o,r;o="",e("#imagelist .uploaded_images").each(function(){r=e(this).attr("data-imageid"),void 0!==r&&(o=o+","+r)}),e("#attachid").val(o)}});var n={establishment:"long_name",street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"long_name",administrative_area_level_2:"long_name",country:"long_name",postal_code:"short_name",postal_code_prefix:"short_name",neighborhood:"long_name"};if("yes"===google_map_submit_vars.enable_auto&&document.getElementById("property_address"))if(1==parseInt(mapfunctions_vars.geolocation_type)){o=new google.maps.places.Autocomplete(document.getElementById("property_address"),{types:["geocode"],partial_match:!0}),"yes"===google_map_submit_vars.limit_country&&o.setComponentRestrictions({country:[google_map_submit_vars.limit_country_select]});var l=document.getElementById("property_address");google.maps.event.addDomListener(l,"keydown",function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault())}),google.maps.event.addListener(o,"place_changed",function(e){var a=o.getPlace();t(a)}),r=new google.maps.places.Autocomplete(document.getElementById("property_city_submit"),{types:["(cities)"]}),google.maps.event.addListener(r,"place_changed",function(){var e=r.getPlace();t(e)})}else 2==parseInt(mapfunctions_vars.geolocation_type)&&jQuery("#property_address").autocomplete({source:function(e,t){var a={format:"json",q:e.term,addressdetails:"1"};"yes"===google_map_submit_vars.limit_country&&(a.countrycodes=google_map_submit_vars.limit_country_select),jQuery.get("https://nominatim.openstreetmap.org/search",a,function(e){e.length?t(e.map(function(e){var t={label:e.display_name,latitude:e.lat,longitude:e.lon,value:e.display_name};return void 0!==e.address&&(t.county=e.address.county||"",t.city=e.address.city||"",t.state=e.address.state||"",t.country=e.address.country||"",t.zip=e.address.postcode||""),t})):t([{value:"",label:control_vars.geo_no_results}])},"json")},select:function(t,a){var o=a.item.latitude,r=a.item.longitude;e("#property_zip").val(a.item.zip),e("#property_county").val(a.item.county),e("#property_city_submit").val(a.item.city),e("#property_country").val(a.item.country),e("#property_city_submit").val(a.item.city),wpresidence_submit_set_postion(o,r)}});jQuery("#google_capture2").on("click",function(e){e.preventDefault(),a()})});