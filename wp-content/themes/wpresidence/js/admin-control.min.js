function wpestate_admin_return_uploaded_image(){return new Promise(function(e,a){var t=wp.media({frame:"post",state:"insert",multiple:!1});t.on("insert",function(){var a=t.state().get("selection").first().toJSON();e(a)}),t.open()})}function wpesteate_admin_upload_image_gallery(){jQuery("#button_new_image").on("click",function(a){e.preventDefault();var t=jQuery(this).parent();wpestate_admin_return_uploaded_image().then(function(e){var a=e.url,n=e.id;t.find("#plan_image").val(a),t.find("#plan_image_attach").val(n)})})}function wpestate_admin_upload_floor_buttons(){jQuery(".floorbuttons").on("click",function(e){e.preventDefault();var a=jQuery(this).parent();wpestate_admin_return_uploaded_image().then(function(e){var t=e.url,n=e.id;a.find("#plan_image").val(t),a.find("#plan_image_attach").val(n),wpestate_break_attachment(n)})})}function wpestate_break_attachment(e){jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpestate_break_attachment",attachmentID:e},success:function(e){},error:function(e){}})}function wpestate_upload_images_in_wpadmin(){for(var e=["category_featured_image_button","page_custom_image_button","property_custom_video_button","page_custom_video_webbm_button","page_custom_video_button","page_custom_video_cover_image_button","page_custom_video_ogv_button"],a=0;a<e.length;a++){var t=e[a];jQuery("#"+t).on("click",function(e){var a=jQuery(this).parent();wpestate_admin_return_uploaded_image().then(function(e){a.find(".wpestate_landing_upload").val(e.url),a.find(".wpestate_landing_upload_id").val(e.id),wpestate_break_attachment(e.id)})})}}function wpestate_upload_background_image_menu_wpadmin(){jQuery(".load_back_menu").on("click",function(){var e=jQuery(this).parent().parent(),a=this.id.replace("wpestate-media-upload-","");wpestate_admin_return_uploaded_image().then(function(t){e.find("#edit-menu-item-megamenu-background-"+a).val(t.url),e.find("#wpestate-media-img-"+a).attr("src",t.url).css("display","block")})})}function wpestate_remove_backround_image_menu_wpadmin(){jQuery(".remove-megamenu-background").on("click",function(e){e.preventDefault();var a=this.id.replace("wpestate-media-remove-","");jQuery("#edit-menu-item-megamenu-background-"+a).val(""),jQuery("#wpestate-media-img-"+a).attr("src","").css("display","none")})}function wpestate_admin_add_new_floor_button_action(){jQuery("#add_new_plan").on("click",function(e){var a;a='<div class="plan_row"><i class=" deleter_floor far fa-trash-alt"></i><p class="meta-options floor_p">\n                <label for="plan_title">'+admin_control_vars.plan_title+'</label><br />\n                <input id="plan_title" type="text" size="36" name="plan_title[]" value="" />\n            </p>\n            \n            <p class="meta-options floor_p"> \n                <label for="plan_description">'+admin_control_vars.plan_desc+'</label><br /> \n                <textarea class="plan_description" type="text" size="36" name="plan_description[]" ></textarea> \n            </p>\n             \n            <p class="meta-options floor_p"> \n                <label for="plan_size">'+admin_control_vars.plan_size+'</label><br /> \n                <input id="plan_size" type="text" size="36" name="plan_size[]" value="" /> \n            </p> \n            \n            <p class="meta-options floor_p"> \n                <label for="plan_rooms">'+admin_control_vars.plan_rooms+'</label><br /> \n                <input id="plan_rooms" type="text" size="36" name="plan_rooms[]" value="" /> \n            </p> \n            <p class="meta-options floor_p"> \n                <label for="plan_bath">'+admin_control_vars.plan_bathrooms+'</label><br /> \n                <input id="plan_bath" type="text" size="36" name="plan_bath[]" value="" /> \n            </p> \n            <p class="meta-options floor_p"> \n                <label for="plan_price">'+admin_control_vars.plan_price+'</label><br /> \n                <input id="plan_price" type="text" size="36" name="plan_price[]" value="" /> \n            </p> \n            \n<p class="meta-options floor_p image_plan"> \n                <label for="plan_image">'+admin_control_vars.plan_image+'</label><br /> \n                <input id="plan_image" type="text" size="36" name="plan_image[]" value="" /> \n                <input id="plan_image_button" type="button"   size="40" class="upload_button button floorbuttons" value="Upload Image" /> \n                <input type="hidden" id="plan_image_attach" name="plan_image_attach[]" value="">\n            </p> \n    </div>',jQuery("#plan_wrapper").append(a),jQuery(".floorbuttons").unbind("click"),wpestate_admin_upload_floor_buttons(),wpestate_admin_delete_floor_button_action()})}function wpestate_admin_delete_floor_button_action(){jQuery(".deleter_floor").unbind("click").on("click",function(e){jQuery(this).parent().remove()})}function wpestate_activate_pack_wpadmin(){jQuery("#activate_pack").on("click",function(e){var a,t,n;a=jQuery(this).attr("data-item"),t=jQuery(this).attr("data-invoice"),n=admin_control_vars.ajaxurl;var i=jQuery("#wpestate_activate_pack").val();jQuery.ajax({type:"POST",url:n,data:{action:"wpestate_activate_purchase",item_id:a,invoice_id:t,security:i},success:function(e){jQuery("#activate_pack").remove(),jQuery("#invnotpaid").remove()},error:function(e){}})})}function wpestate_activate_pack_listings_wpadmin(){jQuery("#activate_pack_listing").on("click",function(e){var a,t,n,i;a=jQuery(this).attr("data-item"),t=jQuery(this).attr("data-invoice"),i=jQuery(this).attr("data-type"),n=admin_control_vars.ajaxurl;var _=jQuery("#wpestate_activate_pack_listing").val();jQuery.ajax({type:"POST",url:n,data:{action:"wpestate_activate_purchase_listing",item_id:a,invoice_id:t,type:i,security:_},success:function(e){jQuery("#activate_pack_listing").remove(),jQuery("#invnotpaid").remove()},error:function(e){}})})}function wpestate_add_wpestate_template(){jQuery("#wpestate_add_head_foot_add_button").on("click",function(){var e=jQuery("#wpestate_add_head_foot_name").val(),a=jQuery("#wpestate_add_head_foot_template").val(),t=jQuery("#wpestate_add_head_foot_location").val(),n=jQuery("#wpestate_add_head_foot_nonce").val();if(!e||!a||!t){var i=jQuery("#wpestate_add_head_foot_wrapper_notification");return i.html("Please fill in all fields."),void i.show()}jQuery.ajax({type:"post",url:ajaxurl,data:{action:"wpestate_add_head_foot",title:e,template:a,location:t,nonce:n},success:function(e){e.success?window.location.reload():alert("Error! Please try again")}})})}function wpestate_save_custom_unit_design_wpadmin(){jQuery("#save_prop_design").on("click",function(e){var a,t,n;n=0,jQuery("#wpresidence_admin_wpestate_uset_unit").is(":checked")&&(n=1),t=jQuery("#property_page_content .property_page_content_wrapper").html();var i=jQuery("#wpestate_save_prop_design").val();a=jQuery(this),a.empty().text("saving...."),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"wpestate_save_property_page_design",content:t,use_unit:n,security:i},success:function(e){a.empty().text("saved....")},error:function(e){}})})}window.wpestateInitMapAdmin=function(){},jQuery(document).ready(function(e){wpestate_upload_background_image_menu_wpadmin(),wpestate_remove_backround_image_menu_wpadmin(),wpestate_upload_images_in_wpadmin(),wpestate_admin_upload_floor_buttons(),wpestate_admin_add_new_floor_button_action(),wpestate_admin_delete_floor_button_action(),wpestate_activate_pack_wpadmin(),wpestate_activate_pack_listings_wpadmin(),wpestate_save_custom_unit_design_wpadmin(),wpestate_add_wpestate_template(),jQuery("body").on("click",".add_custom_parameter",function(){var e=jQuery(".cliche_row").clone();e.removeClass("cliche_row"),jQuery("input",e).val(),jQuery(".add_custom_data_cont").append(e)}),jQuery("body").on("click",".remove_parameter_button",function(){var e=jQuery(this).parents(".single_parameter_row");e.fadeOut(500,function(){e.replaceWith("")})})});